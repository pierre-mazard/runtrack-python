(function(){function h(){var f=parseInt(n.getAttribute("data-min-rows"))|0,t,i,r,u;n.setAttribute("rows",f+"");i=parseInt(window.getComputedStyle(n,null).getPropertyValue("padding-top").split("px")[0])||10;r=parseInt(window.getComputedStyle(n,null).getPropertyValue("padding-bottom").split("px")[0])||10;b?(u=a?a.scrollHeight:n.scrollHeight,t=Math.max(1,Math.ceil((u-i-r)/y))):t=Math.max(1,Math.ceil((n.scrollHeight-i-r)/y));sj_evt.fire("SB.LineChange",{total_line:t});t>=2&&Log&&Log.Log&&Log.Log("MTL","Rows",t.toString(),!1);n.setAttribute("rows",t+"")}function r(){sb_st(h,0)}function d(){sb_st(c,0)}function g(){n.setAttribute("rows","1")}function nt(){sb_st(function(){n.value=n.value.replace(/[\r\n]+/g," ");h()},0)}function tt(t){v&&l&&(k.innerText=n.value,v.innerText=t[1].suggestion?t[1].suggestion:"",t[1].suggestion?l.classList.add("nudgeVisible"):l.classList.remove("nudgeVisible"),b&&h())}function c(){var t,r=(t=n===null||n===void 0?void 0:n.getAttribute("maxlength"))!==null&&t!==void 0?t:"1000",i=n===null||n===void 0?void 0:n.value.length;s&&(s.innerText=i+"/"+r,i>=p&&Log&&Log.Log&&Log.Log("MTL","CharCount",p.toString(),!1),i>=w?(f(s,"b_hide"),o&&Mtl_Config&&Mtl_Config.hideToolbar&&f(o,"b_hide")):(u(s,"b_hide"),o&&Mtl_Config&&Mtl_Config.hideToolbar&&u(o,"b_hide")))}function it(n){sj_pd(n);sj_sp(n);e&&(u(e,"b_expanded"),t&&u(t,"b_hide"),i&&f(i,"b_hide"))}function rt(n){sj_pd(n);sj_sp(n);e&&(f(e,"b_expanded"),t&&f(t,"b_hide"),i&&u(i,"b_hide"))}var u=Lib.CssClass.add,f=Lib.CssClass.remove,ut=Lib.CssClass.contains,n=_ge("sb_form_q"),e=_ge("b_header"),o=_ge("sb_toolbar"),s=_ge("sb_chcounter_r"),t=_ge("sb_expand_r"),i=_ge("sb_collapes_r"),a=_qs(".qfc"),v=_qs(".qfc.b_searchbox .ghost"),l=_qs(".qfc.b_searchbox .nudge"),k=_qs(".qfc.b_searchbox .user-prefix"),y=24,p=50,w=Mtl_Config&&typeof(Mtl_Config.showCharCountAfter=="number")?Mtl_Config.showCharCountAfter:0,b=Mtl_Config&&typeof(Mtl_Config.resizeWithGhosting=="boolean")?Mtl_Config.resizeWithGhosting:!1;n&&(sj_be(n,"change",h),sj_be(n,"cut",r),sj_be(n,"paste",nt),sj_be(n,"focus",r),sj_be(n,"input",r),sj_be(n,"keydown",r),sj_be(n,"touchstart",r),sj_be(n,"click",r),sj_evt.bind("clearCompleted",g),w>=0&&(sj_be(n,"focus",c),sj_be(n,"input",c),sj_be(n,"keydown",d),sj_evt.bind("clearCompleted",c)),t&&sj_be(t,"click",it),i&&sj_be(i,"click",rt),sj_evt.bind("AS.Input.Update",tt),n.value!==n.textContent&&(n.value=n.textContent))})()